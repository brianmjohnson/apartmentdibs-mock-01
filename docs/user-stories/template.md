# US-XXX: [Short Title] [Priority Badge]

**Status**: Draft | Ready | In Progress | In Review | Complete | Archived
**Priority**: P0 (MVP) | P1 (Important) | P2 (Nice to Have) | P3 (Future)
**Sprint**: Sprint X, Week Y

---

## User Story

**As a** [user role/persona]
**I want to** [action/capability]
**So that** [benefit/value]

---

## Priority & Estimation

### RICE Scoring

- **Reach**: [number] users per [timeframe]
- **Impact**: [1-3 scale]
  - 3 = Massive impact
  - 2 = High impact
  - 1 = Medium impact
  - 0.5 = Low impact
- **Confidence**: [percentage]% (how certain are we about reach/impact)
- **Effort**: [number] person-weeks

**RICE Score**: (Reach × Impact × Confidence) / Effort = **[calculated score]**

### Story Points
**Estimated Effort**: [X] story points ([Y-Z] hours)

**Complexity Factors**:
- Technical complexity: [Low/Medium/High]
- UI complexity: [Low/Medium/High]
- Integration complexity: [Low/Medium/High]
- Unknown factors: [List any unknowns]

---

## Acceptance Criteria

### AC-1: [Primary Success Scenario]
**Given** [initial context/state]
**When** [user action]
**Then** [expected outcome]

**Verification**:
- [ ] [Specific test case 1]
- [ ] [Specific test case 2]

### AC-2: [Edge Case or Alternative Flow]
**Given** [context]
**When** [action]
**Then** [outcome]

**Verification**:
- [ ] [Test case]

### AC-3: [Error/Validation Scenario]
**Given** [context]
**When** [invalid action]
**Then** [error handling]

**Verification**:
- [ ] [Error is displayed correctly]
- [ ] [System state remains valid]

### AC-4: [Non-Functional Requirements]
**Performance**:
- [ ] Page loads in < 2 seconds
- [ ] API response < 500ms

**Accessibility**:
- [ ] WCAG 2.1 AA compliant
- [ ] Keyboard navigable
- [ ] Screen reader friendly

**Security**:
- [ ] Access control enforced
- [ ] Input validated
- [ ] No sensitive data in logs

---

## Technical Implementation Notes

### Backend Specification

**Data Models** (ZenStack):
```zmodel
model FeatureName extends BaseModel {
  userId   String
  user     User   @relation(fields: [userId], references: [id])

  // Fields
  name     String
  data     Json?

  // Access control
  @@allow('create', auth() != null)
  @@allow('read', auth() == user)
  @@allow('update', auth() == user)
  @@allow('delete', auth() == user)
}
```

**API Endpoints** (Generated by ZenStack):
- `create[ModelName]` - Create new entity
- `findMany[ModelName]` - List entities
- `findUnique[ModelName]` - Get single entity
- `update[ModelName]` - Update entity
- `delete[ModelName]` - Delete entity

**Business Logic**:
- [Service or utility files needed]
- [Validation rules]
- [Business constraints]

**Database Changes**:
- [ ] New models added to `zschema/`
- [ ] Migrations created
- [ ] Seed data updated (if needed)

### Frontend Specification

**Components**:
```
components/
  feature-name/
    FeatureForm.tsx        - Main form component
    FeatureList.tsx        - List/grid view
    FeatureCard.tsx        - Individual item
    FeatureDialog.tsx      - Modal for create/edit
```

**Hooks** (ZenStack Generated):
```typescript
import {
  useCreate[ModelName],
  useFindMany[ModelName],
  useUpdate[ModelName],
  useDelete[ModelName]
} from '@/lib/hooks/generated/tanstack-query'
```

**State Management**:
- [Zustand store if needed]
- [Form state with react-hook-form]
- [Local vs server state decisions]

**Routing**:
- `/feature-name` - List view
- `/feature-name/new` - Create new
- `/feature-name/[id]` - View/edit single

**Validation** (Zod):
```typescript
import { [ModelName]Schema } from '@/lib/generated/schema/zod'
// Use generated schema or extend it
```

### UI/UX Design

**Mockup**: See `docs/design-mockups/feature-name-mockup.md`

**Key Interactions**:
- [User flow 1]
- [User flow 2]

**Empty States**:
- [What shows when no data]

**Loading States**:
- [Skeleton loaders]
- [Progress indicators]

**Error States**:
- [Validation errors]
- [Network errors]
- [Permission errors]

---

## Analytics Tracking

**Events to Track**:

| Event Name | When Triggered | Properties |
|------------|----------------|------------|
| `feature_viewed` | User views feature page | `{userId, timestamp}` |
| `feature_created` | User creates item | `{userId, itemId, timestamp}` |
| `feature_updated` | User updates item | `{userId, itemId, changes, timestamp}` |
| `feature_deleted` | User deletes item | `{userId, itemId, timestamp}` |
| `feature_error` | Error occurs | `{userId, errorType, errorMessage}` |

**Success Metrics**:
- [What metric indicates this feature is successful]
- [Target value for the metric]
- [How we'll measure it]

---

## Dependencies

### Blocks
[This story cannot start until these are complete]
- US-XXX: [Dependency] - [Why this blocks]

### Blocked By
[These stories are blocked by this one]
- US-YYY: [Story] - [Why it's blocked]

### Related Stories
[Stories that should be considered together]
- US-ZZZ: [Related Story] - [Relationship]

### External Dependencies
- [Third-party library or API]
- [Infrastructure requirement]
- [Design asset needed]

---

## Testing Requirements

### Unit Tests
- [ ] Backend: Model access control policies
- [ ] Backend: Business logic functions
- [ ] Frontend: Component rendering
- [ ] Frontend: User interactions
- [ ] Frontend: Form validation

### Integration Tests
- [ ] API endpoints work correctly
- [ ] Frontend-backend integration
- [ ] Authentication flow
- [ ] Error handling

### E2E Tests (Playwright)
- [ ] Happy path: [describe flow]
- [ ] Error scenarios: [describe scenarios]
- [ ] Edge cases: [describe cases]

**Test Coverage Target**: 80% for business logic

---

## Security Considerations

**Access Control**:
- [Who can perform which actions]
- [Row-level security rules]

**Data Validation**:
- [Input validation rules]
- [Sanitization requirements]

**Potential Risks**:
- [Security risk 1] - [Mitigation]
- [Security risk 2] - [Mitigation]

---

## Performance Considerations

**Expected Load**:
- [Number of users/requests]
- [Data volume]

**Optimization Strategies**:
- [Caching approach]
- [Pagination]
- [Lazy loading]
- [Database indexes needed]

**Performance Targets**:
- Page load: < 2s
- API response: < 500ms
- Time to interactive: < 3s

---

## Rollout Plan

**Phase 1: Development**
- [ ] Backend implementation
- [ ] Frontend implementation
- [ ] Unit tests
- [ ] Integration tests

**Phase 2: Testing**
- [ ] QA review
- [ ] User acceptance testing
- [ ] Performance testing
- [ ] Security review

**Phase 3: Deployment**
- [ ] Deploy to staging
- [ ] Smoke tests
- [ ] Deploy to production
- [ ] Monitor metrics

**Rollback Plan**:
[How to rollback if issues are found]

---

## Open Questions

- [ ] **Question 1**: [What needs clarification]
  - **Answer**: [To be filled in]
- [ ] **Question 2**: [Another question]
  - **Answer**: [To be filled in]

---

## Notes & Updates

### Update Log

| Date | Author | Update |
|------|--------|--------|
| YYYY-MM-DD | Name | Initial draft |
| YYYY-MM-DD | Name | Added technical specs |
| YYYY-MM-DD | Name | Approved, ready for implementation |
| YYYY-MM-DD | Name | Implementation complete |

### Discussion Notes
[Any important discussion points or decisions made during refinement]

---

## Related Documentation

- **ADRs**: [ADR-XXX: Related Decision]
- **Design Mockups**: [Link to Figma/mockup]
- **API Docs**: [Link to generated API docs]
- **Research**: [docs/research/topic.md]

---

**Last Updated**: YYYY-MM-DD
**Assigned To**: [Developer name]
**Reviewer**: [QA/PM name]
